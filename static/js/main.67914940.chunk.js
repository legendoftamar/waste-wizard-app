(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{236:function(e,t,n){e.exports=n(533)},528:function(e,t,n){},530:function(e,t,n){},533:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(30),c=n.n(i),o=n(31),s=n(95),u=n(28),l=n(49),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_REQUEST":return{};case"FETCH_SUCCESS":return Object(l.a)({},e,{waste:t.payload});default:return e}},p=n(155),h={favorites:[]},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FAVORITE":return Object(l.a)({},e,{favorites:[].concat(Object(p.a)(e.favorites),[t.payload])});case"UNFAVORITE":return e.favorites=e.favorites.filter(function(e){return t.payload.title!==e.title}),Object(l.a)({},e,{favorites:Object(p.a)(e.favorites)});default:return e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH":return Object(l.a)({},e,{search:t.payload});default:return e}},m=Object(u.c)({waste:f,favorites:v,search:d}),b=n(40),E=n(41),y=n(43),O=n(42),j=n(44),w=function(e){return{type:"SEARCH",payload:e}},C=function(){return{type:"FETCH_REQUEST"}},k=function(e){return{type:"FETCH_SUCCESS",payload:e}},R=function(){return{type:"FETCH_ERROR"}},S=function(e,t){return{type:"FAVORITE",payload:{title:e,body:t}}},F=function(e,t){return{type:"UNFAVORITE",payload:{title:e,body:t}}},T=function(e){function t(){return Object(b.a)(this,t),Object(y.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(E.a)(t,[{key:"handleSubmit",value:function(e){this.props.search(this.refs.input.value),e.preventDefault()}},{key:"handleChange",value:function(e){this.refs.input.value||this.props.search("&&&")}},{key:"render",value:function(){return null!=this.props.waste&&"undefined"!=typeof this.props.waste.waste?r.a.createElement("div",{className:"search-bar"},r.a.createElement("form",null,r.a.createElement("input",{className:"search-input",type:"text",name:"search",ref:"input",onChange:this.handleChange.bind(this)}),r.a.createElement("button",{type:"submit",onClick:this.handleSubmit.bind(this)}," ",r.a.createElement(s.b,{color:"white",source:"search"})," "))):r.a.createElement("p",null," ")}}]),t}(a.Component);var g=Object(o.b)(function(e){return{waste:e.waste}},function(e){return Object(u.b)({search:w},e)})(T),N=n(235),_=n(154),A=n.n(_),H=function(e){function t(){return Object(b.a)(this,t),Object(y.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(E.a)(t,[{key:"isInFavorites",value:function(e){var t="false";return this.props.favorites.favorites.forEach(function(n){n.title===e.title&&(t="true")}),t}},{key:"renderStar",value:function(){var e=this;return"true"===this.isInFavorites(this.props.item)?r.a.createElement("div",{className:"favorited",onClick:function(){return e.props.unfavorite(e.props.item.title,e.props.item.body)}}," \u2605 "):r.a.createElement("div",{className:"notFavorited",onClick:function(){return e.props.favorite(e.props.item.title,e.props.item.body)}}," \u2605 ")}},{key:"render",value:function(){return r.a.createElement("tr",null,r.a.createElement("td",{className:"star"}," ",this.renderStar()," "),r.a.createElement("td",{className:"item-title"}," ",this.props.item.title," "),r.a.createElement("td",null," ",A()(A()(this.props.item.body))," "))}}]),t}(a.Component);var I=Object(o.b)(function(e){return{waste:e.waste,search:e.search,favorites:e.favorites}},function(e){return Object(u.b)({favorite:S,unfavorite:F},e)})(H),U=function(e){function t(){return Object(b.a)(this,t),Object(y.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchWasteWithRedux()}},{key:"search",value:function(e,t){return!!(e.title.includes(t)||e.body.includes(t)||e.keywords.includes(t))}},{key:"render",value:function(){var e=this;if(!this.props.search)return r.a.createElement("div",null," ");var t=this.props.waste.waste,n=this.props.search.search;return r.a.createElement("table",null,r.a.createElement("tbody",null,t.map(function(t){return e.search(t,n)?r.a.createElement(I,{key:t.title,item:t}," "):null})))}}]),t}(a.Component);var W=Object(o.b)(function(e){return{waste:e.waste,search:e.search,favorites:e.favorites}},{fetchWasteWithRedux:function(){return function(e){return e(C()),fetch("https://secure.toronto.ca/cc_sr_v1/data/swm_waste_wizard_APR?limit=1000",{method:"GET"}).then(function(e){return Promise.all([e,e.json()])}).then(function(t){var n=Object(N.a)(t,2),a=n[0],r=n[1];200===a.status?e(k(r)):e(R())})}}})(U),x=function(e){function t(){return Object(b.a)(this,t),Object(y.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.favorites.favorites;return"undefined"!=typeof e[0]?r.a.createElement("div",{className:"favorites"},r.a.createElement("h2",null," Favorites "),r.a.createElement("table",null,r.a.createElement("tbody",null,e.map(function(e){return r.a.createElement(I,{key:e.title,item:e}," ")})))):r.a.createElement("div",null)}}]),t}(a.Component);var V=Object(o.b)(function(e){return{favorites:e.favorites}})(x);n(528);var D=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Toronto Waste Lookup"),r.a.createElement("div",{className:"content"},r.a.createElement(g,null," "),r.a.createElement(W,null)," "),r.a.createElement("div",null,r.a.createElement(V,null)))};n(530);var J=n(532).default,P=Object(u.d)(m,Object(u.a)(J));c.a.render(r.a.createElement(o.a,{store:P},r.a.createElement(s.a,null,r.a.createElement(D,null))),document.getElementById("root"))}},[[236,2,1]]]);
//# sourceMappingURL=main.67914940.chunk.js.map